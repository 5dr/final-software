!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("UserFeedbackOpener",[],t):"object"==typeof exports?exports.UserFeedbackOpener=t():e.UserFeedbackOpener=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://static.parastorage.com/services/user-feedback-opener/1.2.0/",n.p="undefined"!=typeof window&&window.__STATICS_BASE_URL__||n.p,n(n.s=113)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(36);t.EditRegionsActions=r.EditRegionsActions,t.Layouts=r.Layouts;var o=n(37);t.PageNames=o.PageNames;var i=n(38);t.isBeforeAfterImageDescriptor=i.isBeforeAfterImageDescriptor;var s=n(39);t.FreeTextSize=s.FreeTextSize;var u=n(40);t.ClientIncomingMessageTypes=u.ClientIncomingMessageTypes,t.ClientOutgoingMessageTypes=u.ClientOutgoingMessageTypes,t.CloseReason=u.CloseReason;var a=n(41);t.getRandomGuid4=a.getRandomGuid4;var c=n(42);t.ClientErrorCodes=c.ClientErrorCodes;var f=n(43);t.debugConfig=f.debugConfig,t.prodConfig=f.prodConfig;var l=n(12);t.feedbackDebugConfig=l.feedbackDebugConfig,t.feedbackProdConfig=l.feedbackProdConfig},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return o}),n.d(t,"__assign",function(){return i}),n.d(t,"__rest",function(){return s}),n.d(t,"__decorate",function(){return u}),n.d(t,"__param",function(){return a}),n.d(t,"__metadata",function(){return c}),n.d(t,"__awaiter",function(){return f}),n.d(t,"__generator",function(){return l}),n.d(t,"__exportStar",function(){return d}),n.d(t,"__values",function(){return p}),n.d(t,"__read",function(){return h}),n.d(t,"__spread",function(){return y}),n.d(t,"__await",function(){return v}),n.d(t,"__asyncGenerator",function(){return m}),n.d(t,"__asyncDelegator",function(){return g}),n.d(t,"__asyncValues",function(){return b}),n.d(t,"__makeTemplateObject",function(){return w}),n.d(t,"__importStar",function(){return _}),n.d(t,"__importDefault",function(){return x});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n}function u(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function a(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{a(r.next(e))}catch(e){i(e)}}function u(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,u)}a((r=r.apply(e,t||[])).next())})}function l(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function m(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||u(e,t)})})}function u(e,t){try{!function(e){e.value instanceof v?Promise.resolve(e.value.v).then(a,c):f(i[0][2],e)}(o[e](t))}catch(e){f(i[0][3],e)}}function a(e){u("next",e)}function c(e){u("throw",e)}function f(e,t){e(t),i.shift(),i.length&&u(i[0][0],i[0][1])}}function g(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:v(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,o,(t=e[n](t)).done,t.value)})}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function x(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";var r=n(27),o=n(95),i=Object.prototype.toString;function s(e){return"[object Array]"===i.call(e)}function u(e){return null!==e&&"object"==typeof e}function a(e){return"[object Function]"===i.call(e)}function c(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),s(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:o,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:u,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:a,isStream:function(e){return u(e)&&a(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,o=arguments.length;r<o;r++)c(arguments[r],n);return t},extend:function(e,t,n){return c(t,function(t,o){e[o]=n&&"function"==typeof t?r(t,n):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t){var n=e.exports={version:"2.6.1"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(9)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setHost=function(e){r=e},t.getHost=function(){return r},t.isWebWorker=function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope},t.provideBrowsingContext=function(e){if("undefined"!=typeof window&&window)try{return window.top===window.self?e?e(window):window:null}catch(e){return null}return null};var r="frog.wix.com"},function(e,t,n){var r={EventEmitter:n(86),EmitterSubscription:n(25)};e.exports=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";(function(t){var r=n(2),o=n(98),i={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(28):void 0!==t&&(e=n(28)),e}(),transformRequest:[function(e,t){return o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(e){u.headers[e]={}}),r.forEach(["post","put","patch"],function(e){u.headers[e]=r.merge(i)}),e.exports=u}).call(this,n(97))},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.feedbackProdConfig={FEEDBACK_SERVICE_BASE_URL:"https://media-feedback.wix.com/_api/feedback"},t.feedbackDebugConfig={FEEDBACK_SERVICE_BASE_URL:"https://media-feedback-test.wix.com/_api/feedback"}},function(e,t,n){e.exports={default:n(45),__esModule:!0}},function(e,t,n){var r=n(7),o=n(3),i=n(47),s=n(49),u=n(16),a=function(e,t,n){var c,f,l,d=e&a.F,p=e&a.G,h=e&a.S,y=e&a.P,v=e&a.B,m=e&a.W,g=p?o:o[t]||(o[t]={}),b=g.prototype,w=p?r:h?r[t]:(r[t]||{}).prototype;for(c in p&&(n=t),n)(f=!d&&w&&void 0!==w[c])&&u(g,c)||(l=f?w[c]:n[c],g[c]=p&&"function"!=typeof w[c]?n[c]:v&&f?i(l,r):m&&w[c]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):y&&"function"==typeof l?i(Function.call,l):l,y&&((g.virtual||(g.virtual={}))[c]=l,e&a.R&&b&&!b[c]&&s(b,c,l)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a},function(e,t,n){var r=n(50),o=n(51),i=n(53),s=Object.defineProperty;t.f=n(4)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(18),o=n(19);e.exports=function(e){return r(o(e))}},function(e,t,n){var r=n(62);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var o=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name=n.constructor.name,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}();e.exports.defined=function(e,t){if(void 0===e)throw new o(t)},e.exports.object=function(e,t){if(void 0!==e&&("object"!==(void 0===e?"undefined":r(e))||Array.isArray(e)||null===e))throw new o(t)},e.exports.ok=function(e,t){if(!e)throw new o(t)},e.exports.AssertionError=o},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=n(21),i=n(78).mapValues,s=n(79),u=n(80).log,a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._publishers=t.publishers,this._validators=t.validators||[],this._defaults=t.defaults,this._events=t.events||{},this._context=n,this._defaultValueTimeout=t.defaultValueTimeout||5e3,this._defaultContinueOnFail=t.defaultContinueOnFail||!1,this._onPublisherFailHandler=t.onPublisherFailHandler||e._defaultPublisherFailHandler}return r(e,[{key:"log",value:function(e,t){var n=this;o.defined(e,"Event object or event key must be provided.");var r=this._eventOrExtractFromEvents(e,t);return this._getDefaults().then(function(e){var t=Object.assign({},e,r);if(!(0===n._validators.length||n._validators.some(function(e){return e.match(t)&&(e.execute(t)||!0)})))throw new Error("No validator accepted the event. Source: "+t.src+" Evid: "+(t.evid||t.evtId));return Promise.all(n._publishers.map(function(e){var r=Object.assign({},t);return Promise.resolve().then(function(){return e(r,n._context)}).catch(function(t){return n._onPublisherFailHandler(t,{publisherName:e.name})})})).then(function(){})})}},{key:"_eventOrExtractFromEvents",value:function(e,t){if("string"!=typeof e)return e;var n=this._events[e];if(!n)throw new o.AssertionError("Event with key '"+e+"' not found in event map.");return t?Object.assign({},n,t):n}},{key:"_handleDefaultsError",value:function(e){return this._defaultContinueOnFail?(u.error(e),null):Promise.reject(e)}},{key:"_getDefaults",value:function(){var e=this;if(!this._defaults)return Promise.resolve({});var t=i(this._defaults,function(t,n){if("function"==typeof t)try{t=t()}catch(t){return e._handleDefaultsError(t)}return t&&"function"!=typeof t.then?t:s.timedPromise(t,{message:"Cannot get default value '"+n+" for BI Event'",timeout:e._defaultValueTimeout}).catch(function(t){return e._handleDefaultsError(t)})});return s.allAsObject(t)}}],[{key:"_defaultPublisherFailHandler",value:function(e,t){return t.publisherName}}]),e}();e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildUrl=function(e,t){var n=e.host,u=e.endpoint,a=void 0===u?i:u,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=n||(0,o.getHost)(),a=c.endpoint||a,t._=""+(new Date).getTime()+s++,t.ms=Math.round((0,r.now)());var f="//"+n+"/"+a;return Object.keys(t).reduce(function(e,n){return function(e,t,n){var r=-1===e.indexOf("?")?"?":"&";return""+e+r+encodeURIComponent(t)+"="+encodeURIComponent(n)}(e,n,t[n])},f)},t.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})};var r=n(82),o=n(5),i="",s=0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listen=function(e){(0,r.provideBrowsingContext)(function(t){var n=t.document.referrer;[function(e){setTimeout(function(){return(0,r.provideBrowsingContext)(function(t){return e(t.location.href)})})},function(e){(0,r.provideBrowsingContext)(function(t){var n=t.history;return["pushState","replaceState"].forEach(function(t){!function(e,t,n){if(!e||!e[t])return;var r=e[t];e[t]=function(){return n.apply(null,arguments),r.apply(e,arguments)}}(n,t,function(t,n,r){return e(r)})})})},function(e){(0,r.provideBrowsingContext)(function(t){return t.addEventListener("popstate",function(){return e(t.location.href)})})}].forEach(function(t){return t(function(t){e(n,t),n=t})})})},t.sendBeacon=function(e){if("undefined"==typeof navigator||!navigator||!navigator.sendBeacon)return!1;return navigator.sendBeacon(e)};var r=n(5)},function(e,t,n){"use strict";var r=function(e){function t(n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,n),this.listener=r,this.context=o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(n(87));e.exports=r},function(e,t,n){"use strict";var r=function(e){};e.exports=function(e,t,n,o,i,s,u,a){if(r(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[n,o,i,s,u,a],l=0;(c=new Error(t.replace(/%s/g,function(){return f[l++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(2),o=n(99),i=n(101),s=n(102),u=n(103),a=n(29),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(104);e.exports=function(e){return new Promise(function(t,f){var l=e.data,d=e.headers;r.isFormData(l)&&delete d["Content-Type"];var p=new XMLHttpRequest,h="onreadystatechange",y=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||u(e.url)||(p=new window.XDomainRequest,h="onload",y=!0,p.onprogress=function(){},p.ontimeout=function(){}),e.auth){var v=e.auth.username||"",m=e.auth.password||"";d.Authorization="Basic "+c(v+":"+m)}if(p.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p[h]=function(){if(p&&(4===p.readyState||y)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in p?s(p.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:n,config:e,request:p};o(t,f,r),p=null}},p.onerror=function(){f(a("Network Error",e,null,p)),p=null},p.ontimeout=function(){f(a("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var g=n(105),b=(e.withCredentials||u(e.url))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0;b&&(d[e.xsrfHeaderName]=b)}if("setRequestHeader"in p&&r.forEach(d,function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete d[t]:p.setRequestHeader(t,e)}),e.withCredentials&&(p.withCredentials=!0),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),f(e),p=null)}),void 0===l&&(l=null),p.send(l)})}},function(e,t,n){"use strict";var r=n(100);e.exports=function(e,t,n,o,i){var s=new Error(e);return r(s,t,n,o,i)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(44)),o=u(n(55)),i=u(n(74)),s=u(n(75));function u(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,e),this.experiments=t.experiments||{},this.loaders=[],this.baseUrl=t.baseUrl||"",t.scope&&this.load(t.scope)}return(0,s.default)(e,[{key:"add",value:function(e){this.experiments=(0,o.default)({},this.experiments,e)}},{key:"get",value:function(e){return this.experiments[e]}},{key:"enabled",value:function(e){return"true"===this.get(e)}},{key:"all",value:function(){return this.experiments}},{key:"_addLoader",value:function(e){var t=this;return this.loaders.push(e),e.then(function(){t.loaders=t.loaders.filter(function(t){return t!==e})}),e}},{key:"_getUrlWithFallback",value:function(e,t){return function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="text",r.withCredentials=!0,r.onload=function(){r.status>=200&&r.status<400?t(r.responseText):n("Failed to load "+e+", status "+r.status)},r.onerror=function(){return n("Failed to load "+e)},r.send()})}(e).then(function(e){return function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}(e)}).catch(function(){return t})}},{key:"load",value:function(e){var t=this,n=this.baseUrl+"/_api/wix-laboratory-server/laboratory/conductAllInScope?scope="+e,r=this._getUrlWithFallback(n,{}).then(function(e){return t.add(e)});return this._addLoader(r)}},{key:"conduct",value:function(e,t){var n=this,o=this.baseUrl+"/_api/wix-laboratory-server/laboratory/conductExperiment?key="+e+"&fallback="+t,i=this._getUrlWithFallback(o,t).then(function(t){return n.add((0,r.default)({},e,t)),t});return this._addLoader(i)}},{key:"pending",value:function(){return!!this.loaders.length}},{key:"ready",value:function(){return Promise.all(this.loaders)}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(76),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(81)),i=n(5),s=n(84);var u=function(e){return(new r.BiLoggerFactory).addPublisher(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return((0,i.isWebWorker)()?s.fetchPublisher:e.useBeacon?s.beaconPublisher:s.imagePublisher)(e)}(e))},a={factory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e.trackSession||void 0===e.trackSession)&&o.track(u),u(e)},setHost:i.setHost};t.default=a},function(e,t,n){var r=n(90);"string"==typeof r&&(r=[[e.i,r,""]]);var o={singleton:!0,transform:void 0};n(92)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){e.exports=n(94)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Add="add",e.Remove="remove",e.Move="move",e.Resize="resize"}(t.EditRegionsActions||(t.EditRegionsActions={})),function(e){e.RegionsRecognition="regions-recognition",e.TwoOptions="two-options",e.RegionsSelection="regions-selection",e.FreeText="free-text",e.TwoImagesToggle="two-images-toggle",e.TwoOptionsText="two-options-text",e.MultichoiceText="multichoice-text"}(t.Layouts||(t.Layouts={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Question="question",e.Edit="edit",e.ThankYou="thank_you",e.Error="error"}(t.PageNames||(t.PageNames={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBeforeAfterImageDescriptor=function(e){return void 0!==e.before&&void 0!==e.after}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Small="small",e.Large="large"}(t.FreeTextSize||(t.FreeTextSize={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.OpenQuestion="AI_FEEDBACK.OPEN_QUESTION"}(t.ClientIncomingMessageTypes||(t.ClientIncomingMessageTypes={})),function(e){e.Ready="AI_FEEDBACK.READY",e.CloseFrame="AI_FEEDBACK.CLOSE_FRAME",e.LayoutIsReady="AI_FEEDBACK.LAYOUT_IS_READY",e.LayoutMountError="AI_FEEDBACK.LAYOUT_MOUNT_ERROR"}(t.ClientOutgoingMessageTypes||(t.ClientOutgoingMessageTypes={})),function(e){e.FinishedFlow="finished-flow",e.Canceled="canceled",e.CanceledDueToError="canceled-due-to-error"}(t.CloseReason||(t.CloseReason={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomGuid4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.LayoutMountFailed="layout-mount-failed",e.LayoutMountFailedByTimeout="layout-mount-failed-by-timeout",e.ImageLoadFailed="image-load-failed"}(t.ClientErrorCodes||(t.ClientErrorCodes={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(12);t.prodConfig=r.__assign({},o.feedbackProdConfig,{AI_FEEDBACK_PAGE_URL:"https://apps.wix.com/user-feedback-client",EXPOSURE_SERVICE_BASE_URL:"https://media-feedback.wix.com/_api/exposure"}),t.debugConfig=r.__assign({},o.feedbackDebugConfig,{AI_FEEDBACK_PAGE_URL:"http://local.wix.com:3003",EXPOSURE_SERVICE_BASE_URL:"https://media-feedback-test.wix.com/_api/exposure"})},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(13));t.default=function(e,t,n){return t in e?(0,r.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){n(46);var r=n(3).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(14);r(r.S+r.F*!n(4),"Object",{defineProperty:n(15).f})},function(e,t,n){var r=n(48);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(15),o=n(54);e.exports=n(4)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(8);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(4)&&!n(9)(function(){return 7!=Object.defineProperty(n(52)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(8),o=n(7).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(8);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(56));t.default=r.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){e.exports={default:n(57),__esModule:!0}},function(e,t,n){n(58),e.exports=n(3).Object.assign},function(e,t,n){var r=n(14);r(r.S+r.F,"Object",{assign:n(59)})},function(e,t,n){"use strict";var r=n(60),o=n(71),i=n(72),s=n(73),u=n(18),a=Object.assign;e.exports=!a||n(9)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=a({},e)[n]||Object.keys(a({},t)).join("")!=r})?function(e,t){for(var n=s(e),a=arguments.length,c=1,f=o.f,l=i.f;a>c;)for(var d,p=u(arguments[c++]),h=f?r(p).concat(f(p)):r(p),y=h.length,v=0;y>v;)l.call(p,d=h[v++])&&(n[d]=p[d]);return n}:a},function(e,t,n){var r=n(61),o=n(70);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(16),o=n(17),i=n(63)(!1),s=n(66)("IE_PROTO");e.exports=function(e,t){var n,u=o(e),a=0,c=[];for(n in u)n!=s&&r(u,n)&&c.push(n);for(;t.length>a;)r(u,n=t[a++])&&(~i(c,n)||c.push(n));return c}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(17),o=n(64),i=n(65);e.exports=function(e){return function(t,n,s){var u,a=r(t),c=o(a.length),f=i(s,c);if(e&&n!=n){for(;c>f;)if((u=a[f++])!=u)return!0}else for(;c>f;f++)if((e||f in a)&&a[f]===n)return e||f||0;return!e&&-1}}},function(e,t,n){var r=n(20),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(20),o=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(67)("keys"),o=n(69);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t,n){var r=n(3),o=n(7),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(68)?"pure":"global",copyright:"\xa9 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=!0},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(19);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(13));t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,r.default)(e,o.key,o)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){"use strict";var r=n(77),o=n(22);e.exports.BiLoggerFactory=r,e.exports.BiLogger=o,e.exports.factory=function(){return new r}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(21),s=n(22),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._publishers=[],this._validators=[],this._defaults={},this._events={}}return o(e,[{key:"addPublisher",value:function(e){return i.defined(e,"Publisher must be provided"),i.ok("function"==typeof e,"Expected a publisher function"),this._publishers.push(e),this}},{key:"addValidator",value:function(e){return i.defined(e,"Validator must be provided"),i.ok("object"===(void 0===e?"undefined":r(e))&&e,"Expected a validator object"),i.ok(e.execute&&e.match,"Provided validator does not match the interface"),this._validators.push(e),this}},{key:"setDefaults",value:function(e){return i.defined(e,"Defaults must be provided"),i.object(e,"Defaults must be an object"),this._defaults=e,this}},{key:"updateDefaults",value:function(e){return i.defined(e,"Defaults must be provided"),i.object(e,"Defaults must be an object"),Object.assign(this._defaults,e),this}},{key:"setEvents",value:function(e){return i.defined(e,"Events must be provided"),i.object(e,"Events must be an object"),this._events=e,this}},{key:"setDefaultValueTimeout",value:function(e){return i.defined(e,"Default Value Timeout must be provided"),this._defaultValueTimeout=e,this}},{key:"setDefaultContinueOnFail",value:function(e){return i.defined(e,"Default Continue On Fail must be provided"),this._defaultContinueOnFail=e,this}},{key:"setPublisherFailHandler",value:function(e){return i.defined(e,"Publisher Fail Handler must be provided"),this._onPublisherFailHandler=e,this}},{key:"logger",value:function(e){return new s({publishers:this._publishers,validators:this._validators,defaults:this._defaults,events:this._events,defaultValueTimeout:this._defaultValueTimeout,defaultContinueOnFail:this._defaultContinueOnFail,onPublisherFailHandler:this._onPublisherFailHandler},e)}}]),e}();e.exports=u},function(e,t,n){"use strict";e.exports.mapValues=function(e,t){return e?Object.keys(e).reduce(function(n,r){return n[r]=t(e[r],r,e),n},{}):{}}},function(e,t,n){"use strict";e.exports.timedPromise=function(e,t){var n=t.message,r=t.timeout,o=new Promise(function(e,t){setTimeout(t,r,n?"Timeout: "+n:"Timeout")});return Promise.race([e,o])},e.exports.allAsObject=function(e){var t=Object.keys(e);return Promise.all(t.map(function(t){return e[t]})).then(function(e){return e.reduce(function(e,n,r){return e[t[r]]=n,e},{})})}},function(e,t,n){"use strict";e.exports.log={error:function(){var e;console&&console.error&&(e=console).error.apply(e,arguments)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.track=function(e){!(0,i.isWebWorker)()&&(0,i.provideBrowsingContext)(function(e){return!e[u]})&&((0,i.provideBrowsingContext)(function(e){return e[u]=!0}),function(e){var t=function(e){return e({endpoint:a,useBeacon:!0}).setDefaults({src:c,evid:f,vsi:(0,r.guid)()}).logger()}(e),n=1;(0,o.listen)(function(e,r){var o=(0,i.provideBrowsingContext)(function(e){return{sr:(0,s.getDesktopSize)(e),wr:(0,s.getWindowSize)(e)}}),u=o.sr,a=o.wr;t.log({from:e,to:r,fis:n,sr:u,wr:a}),n=0})}(e))};var r=n(23),o=n(24),i=n(5),s=n(83),u="__isTrackingBiBrowsingSession__",a="p",c=19,f=3},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.now=function(){return"undefined"!=typeof performance&&performance&&performance.now?performance.now():-1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDesktopSize=function(e){var t=e.screen&&e.screen.width||0,n=e.screen&&e.screen.height||0;return t+"x"+n},t.getWindowSize=function(e){var t=0,n=0;e.innerWidth?(t=e.innerWidth,n=e.innerHeight):e.document&&(e.document.documentElement&&e.document.documentElement.clientWidth?(t=e.document.documentElement.clientWidth,n=e.document.documentElement.clientHeight):e.document.body&&e.document.body.clientWidth&&(t=e.document.body.clientWidth,n=e.document.body.clientHeight));return t+"x"+n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.imagePublisher=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,r.buildUrl)(e,t,n);return(0,o.pixelTransport)(i,n.image)}},t.beaconPublisher=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,r.buildUrl)(e,t,n);return(0,o.beaconTransport)(i).catch(function(){return(0,o.pixelTransport)(i,n.image)})}},t.fetchPublisher=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,r.buildUrl)(e,t,n);return(0,o.fetchTransport)(i)}};var r=n(23),o=n(85)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beaconTransport=function(e){return new Promise(function(t,n){return(0,r.sendBeacon)(e)?t():n(new Error("Transport Error: Cannot send bi using beacons"))})},t.pixelTransport=function(e,t){return new Promise(function(n,r){var o=t||new window.Image(0,0);o.onload=function(){return n()},o.onerror=function(){return r(new Error("Transport Error: Cannot send bi using pixelTransport"))},o.src=e})},t.fetchTransport=function(e){return fetch(e,{credentials:"include"}).then(function(e){if(!e.ok)throw Error("Transport Error: Cannot send bi using fetch. Status: "+e.status)})};var r=n(24)},function(e,t,n){"use strict";var r=n(25),o=n(88),i=n(89),s=n(26),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._subscriber=new o,this._currentSubscription=null}return e.prototype.addListener=function(e,t,n){return this._subscriber.addSubscription(e,new r(this._subscriber,t,n))},e.prototype.once=function(e,t,n){var r=this;return this.addListener(e,function(){r.removeCurrentListener(),t.apply(n,arguments)})},e.prototype.removeAllListeners=function(e){this._subscriber.removeAllSubscriptions(e)},e.prototype.removeCurrentListener=function(){this._currentSubscription||s(!1),this._subscriber.removeSubscription(this._currentSubscription)},e.prototype.listeners=function(e){var t=this._subscriber.getSubscriptionsForType(e);return t?t.filter(i.thatReturnsTrue).map(function(e){return e.listener}):[]},e.prototype.emit=function(e){var t=this._subscriber.getSubscriptionsForType(e);if(t){for(var n=Object.keys(t),r=0;r<n.length;r++){var o=t[n[r]];o&&(this._currentSubscription=o,this.__emitToSubscription.apply(this,[o].concat(Array.prototype.slice.call(arguments))))}this._currentSubscription=null}},e.prototype.__emitToSubscription=function(e,t){var n=Array.prototype.slice.call(arguments,2);e.listener.apply(e.context,n)},e}();e.exports=u},function(e,t,n){"use strict";var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subscriber=t}return e.prototype.remove=function(){this.subscriber&&(this.subscriber.removeSubscription(this),this.subscriber=null)},e}();e.exports=r},function(e,t,n){"use strict";var r=n(26),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._subscriptionsForType={},this._currentSubscription=null}return e.prototype.addSubscription=function(e,t){t.subscriber!==this&&r(!1),this._subscriptionsForType[e]||(this._subscriptionsForType[e]=[]);var n=this._subscriptionsForType[e].length;return this._subscriptionsForType[e].push(t),t.eventType=e,t.key=n,t},e.prototype.removeAllSubscriptions=function(e){void 0===e?this._subscriptionsForType={}:delete this._subscriptionsForType[e]},e.prototype.removeSubscription=function(e){var t=e.eventType,n=e.key,r=this._subscriptionsForType[t];r&&delete r[n]},e.prototype.getSubscriptionsForType=function(e){return this._subscriptionsForType[e]},e}();e.exports=o},function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,n){(t=e.exports=n(91)(!1)).push([e.i,"._2QMym{position:fixed;top:0;left:0;z-index:6001;width:100%;height:100%;border:0;background:hsla(0,0%,100%,.8)}",""]),t.locals={uiFeedback:"_2QMym"}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),i=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(i).concat([o]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var s=e[o];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){var r={},o=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),i=function(e){var t={};return function(e){return void 0===t[e]&&(t[e]=function(e){return document.querySelector(e)}.call(this,e)),t[e]}}(),s=null,u=0,a=[],c=n(93);function f(e,t){for(var n=0;n<e.length;n++){var o=e[n],i=r[o.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](o.parts[s]);for(;s<o.parts.length;s++)i.parts.push(v(o.parts[s],t))}else{var u=[];for(s=0;s<o.parts.length;s++)u.push(v(o.parts[s],t));r[o.id]={id:o.id,refs:1,parts:u}}}}function l(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],s=t.base?i[0]+t.base:i[0],u={css:i[1],media:i[2],sourceMap:i[3]};r[s]?r[s].parts.push(u):n.push(r[s]={id:s,parts:[u]})}return n}function d(e,t){var n=i(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=a[a.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),a.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function p(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=a.indexOf(e);t>=0&&a.splice(t,1)}function h(e){var t=document.createElement("style");return e.attrs.type="text/css",y(t,e.attrs),d(e,t),t}function y(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function v(e,t){var n,r,o,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var a=u++;n=s||(s=h(t)),r=g.bind(null,n,a,!1),o=g.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",y(t,e.attrs),d(e,t),t}(t),r=function(e,t,n){var r=n.css,o=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||i)&&(r=c(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([r],{type:"text/css"}),u=e.href;e.href=URL.createObjectURL(s),u&&URL.revokeObjectURL(u)}.bind(null,n,t),o=function(){p(n),n.href&&URL.revokeObjectURL(n.href)}):(n=h(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){p(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=o()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=l(e,t);return f(n,t),function(e){for(var o=[],i=0;i<n.length;i++){var s=n[i];(u=r[s.id]).refs--,o.push(u)}e&&f(l(e,t),t);for(i=0;i<o.length;i++){var u;if(0===(u=o[i]).refs){for(var a=0;a<u.parts.length;a++)u.parts[a]();delete r[u.id]}}}};var m=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function g(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=m(t,o);else{var i=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o,i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i)?e:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(e,t,n){"use strict";var r=n(2),o=n(27),i=n(96),s=n(10);function u(e){var t=new i(e),n=o(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var a=u(s);a.Axios=i,a.create=function(e){return u(r.merge(s,e))},a.Cancel=n(31),a.CancelToken=n(111),a.isCancel=n(30),a.all=function(e){return Promise.all(e)},a.spread=n(112),e.exports=a,e.exports.default=a},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,n){"use strict";var r=n(10),o=n(2),i=n(106),s=n(107);function u(e){this.defaults=e,this.interceptors={request:new i,response:new i}}u.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),(e=o.merge(r,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},o.forEach(["delete","get","head","options"],function(e){u.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){u.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=u},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var a,c=[],f=!1,l=-1;function d(){f&&a&&(f=!1,a.length?c=a.concat(c):l=-1,c.length&&p())}function p(){if(!f){var e=u(d);f=!0;for(var t=c.length;t;){for(a=c,c=[];++l<t;)a&&a[l].run();l=-1,t=c.length}a=null,f=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||f||u(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(2);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(29);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e}},function(e,t,n){"use strict";var r=n(2);function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var s=[];r.forEach(t,function(e,t){null!==e&&void 0!==e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(o(t)+"="+o(e))}))}),i=s.join("&")}return i&&(e+=(-1===e.indexOf("?")?"?":"&")+i),e}},function(e,t,n){"use strict";var r=n(2),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,s={};return e?(r.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(s[t]&&o.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}}),s):s}},function(e,t,n){"use strict";var r=n(2);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function o(){this.message="String contains an invalid character"}o.prototype=new Error,o.prototype.code=5,o.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,n,i=String(e),s="",u=0,a=r;i.charAt(0|u)||(a="=",u%1);s+=a.charAt(63&t>>8-u%1*8)){if((n=i.charCodeAt(u+=.75))>255)throw new o;t=t<<8|n}return s}},function(e,t,n){"use strict";var r=n(2);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,i,s){var u=[];u.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),r.isString(o)&&u.push("path="+o),r.isString(i)&&u.push("domain="+i),!0===s&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(2);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=o},function(e,t,n){"use strict";var r=n(2),o=n(108),i=n(30),s=n(10),u=n(109),a=n(110);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.baseURL&&!u(e.url)&&(e.url=a(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return c(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return i(t)||(c(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(2);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(31);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new r(e),t(n.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o(function(t){e=t}),cancel:e}},e.exports=o},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";n.r(t);var r,o,i=n(0),s=n(1),u=n(32),a=n.n(u),c=n(33),f=n.n(c).a.factory({endpoint:"feedback-service"}).setDefaults({src:94}).logger(),l=n(6),d=function(e){return e.data},p=function(){function e(e,t){var n=this;this.targetFrame=e,this.options=t,this.messagesEmitter=new l.EventEmitter,this.handleMessage=function(e){if(n.getTargetOrigin().includes(e.origin)){var t=d(e),r=t.type,o=t.data;n.messagesEmitter.emit(r,o)}},window.addEventListener("message",this.handleMessage)}return e.prototype.getTargetOrigin=function(){return this.options.targetOrigin},e.prototype.destroy=function(){this.messagesEmitter.removeAllListeners(),window.removeEventListener("message",this.handleMessage)},e.prototype.sendMessage=function(e){var t=this.targetFrame.contentWindow;if(!t)throw Error('can not send message "'+JSON.stringify(e)+'", no contentWindow');t.postMessage(e,this.getTargetOrigin())},e.prototype.waitForMessage=function(e){var t=this;return new Promise(function(n){t.messagesEmitter.once(e,function(e){n(e)})})},e.prototype.addListener=function(e,t){this.messagesEmitter.addListener(e,t)},e}(),h=n(34);!function(e){e.FinishedFlow="finished-flow",e.Canceled="canceled",e.CanceledDueToError="canceled-due-to-error",e.ClosedByOpener="closed-by-opener"}(r||(r={})),function(e){e.Opened="opened",e.Closed="closed",e.Error="error"}(o||(o={}));var y,v=n(35),m=n.n(v),g=function(){function e(e,t){this.siteToken=t,this.transport=m.a.create({withCredentials:!0,baseURL:e.EXPOSURE_SERVICE_BASE_URL})}return e.prototype.getShouldAskQuestion=function(e){return this.transport.get("q/"+e+"?siteToken="+this.siteToken).then(function(e){return e.data.payload})},e}();!function(e){e.None="none",e.Opening="opening",e.Shown="shown"}(y||(y={}));function b(e){var t=e.config,n=t.FEEDBACK_SERVICE_BASE_URL,r=t.EXPOSURE_SERVICE_BASE_URL,o=e.showOptions,i=o.customContext,s=o.noDontShowAgain,u=o.params,a=o.questionId,c=o.triggerEvent,f=e.options,l=f.locale,d=f.siteToken,p=f.initiator,h=f.metasiteId,y=f.origin,v=f.thankYouPage,m=e.sessionId,g=e.startOpeningTime,b=void 0===g?(new Date).getTime():g,w=e.categoryId;return{meta:{startOpeningTime:b,experiments:e.experiments},payload:{triggerEvent:c,questionId:a,categoryId:w,customContext:i,noDontShowAgain:s,layout:u,feedbackWindowParams:{locale:l,siteToken:d,initiator:p,metasiteId:h,origin:y,thankYouPage:v,sessionId:m,feedbackServiceBaseUrl:n,exposureServiceBaseUrl:r}}}}var w=function(e){f.log(s.__assign({},e,{evid:815}))};var _={debug:!1};var x=function(){function e(e,t){void 0===t&&(t=_);var n=this;this.messagesEmitter=new l.EventEmitter,this.currentQuestion={state:y.None},this.feedbackWindow=void 0,this.loadExperimentsBag=function(){return n.experiments.ready().then(function(){return n.experiments.all()})},this.emitErrorAndResetState=function(e){return function(t){n.currentQuestion={state:y.None},n.emitMessage({type:o.Error,showOptions:e,error:t})}},this.sendOpenQuestionMessage=function(e){var t=e.feedbackWindow,r=e.showOptions,o=e.startOpeningTime,s=e.categoryId,u=e.experimentsBag;t.transport.sendMessage({type:i.ClientIncomingMessageTypes.OpenQuestion,data:b({config:n.config,options:n.options,showOptions:r,sessionId:n.sessionId,startOpeningTime:o,categoryId:s,experiments:u})})},this.getBiDefaultParams=function(e){return function(t){var r=e.questionId,o=e.triggerEvent,i=e.params.layout;return s.__assign({sessionId:n.sessionId,initiatorName:n.options.initiator,metasiteId:n.options.metasiteId,questionId:r,layout:i,trigger:o,origin:n.options.origin},t?{categoryId:t}:{})}},this.options=e,this.config=function(e){var t=e.debug;return t?!0===t?i.debugConfig:s.__assign({},i.debugConfig,t):i.prodConfig}(t),this.exposureService=new g(this.config,this.options.siteToken)}return Object.defineProperty(e.prototype,"sessionId",{get:function(){if(!this._sessionId)throw new Error("`this._sessionId` is not defined");return this._sessionId},set:function(e){this._sessionId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"experiments",{get:function(){if(!this._experiments)throw new Error("`this._experiments` is not defined");return this._experiments},set:function(e){this._experiments=e},enumerable:!0,configurable:!0}),e.prototype.getURL=function(){return this.config.AI_FEEDBACK_PAGE_URL},e.prototype.init=function(){var e=this,t=function(e,t,n){var r=document.createElement("iframe");return r.src=e,r.id="userFeedback",r.className=h.uiFeedback,r.title=t,r.style.display="none",n.appendChild(r),r}(this.getURL(),"Some title",this.options.appendTo||document.body),n=function(e,t){return new p(e,t)}(t,{targetOrigin:this.config.AI_FEEDBACK_PAGE_URL}),u={iframe:t,transport:n,loadPromise:function(e,t,n){return new Promise(function(r,o){var i=setTimeout(function(){o(t())},e);n.then(function(e){clearTimeout(i),r(e)}).catch(function(e){clearTimeout(i),o(e)})})}(1e4,function(){return new Error("Iframe haven't sent READY message within given timeout.")},n.waitForMessage(i.ClientOutgoingMessageTypes.Ready))};return this.experiments=new a.a,this.experiments.load("user-feedback"),n.addListener(i.ClientOutgoingMessageTypes.Ready,function(){e.currentQuestion.state===y.Shown&&(e.currentQuestion={state:y.Opening,showOptions:e.currentQuestion.showOptions},n.sendMessage({type:i.ClientIncomingMessageTypes.OpenQuestion,data:b({config:e.config,options:e.options,showOptions:e.currentQuestion.showOptions,sessionId:e.sessionId,experiments:e.experiments.all()})}))}),n.addListener(i.ClientOutgoingMessageTypes.LayoutIsReady,function(){if(e.currentQuestion.state!==y.None){var n=e.currentQuestion.showOptions;e.currentQuestion={state:y.Shown,showOptions:n},t.style.display="block";var r=t.contentWindow;r&&r.focus&&r.focus(),e.emitMessage({type:o.Opened,showOptions:n})}}),n.addListener(i.ClientOutgoingMessageTypes.LayoutMountError,function(t){e.currentQuestion.state===y.Opening&&e.emitErrorAndResetState(e.currentQuestion.showOptions)(t)}),n.addListener(i.ClientOutgoingMessageTypes.CloseFrame,function(t){var n=e.currentQuestion.state===y.None?void 0:e.currentQuestion.showOptions,u=function(e){return function(t){e&&f.log(s.__assign({},e,{pageName:t,evid:803}))}}(n?e.getBiDefaultParams(n)(void 0):void 0);switch(t.type){case i.CloseReason.FinishedFlow:return Boolean(e.options.thankYouPage)&&u(i.PageNames.ThankYou),void e.hideByClose({closeReason:r.FinishedFlow,questionResult:t.data});case i.CloseReason.Canceled:return u(i.PageNames.Question),void e.hideByClose({closeReason:r.Canceled});case i.CloseReason.CanceledDueToError:return u(i.PageNames.Error),e.currentQuestion.state!==y.None&&e.emitMessage({type:o.Closed,showOptions:e.currentQuestion.showOptions,closeEventPayload:{closeReason:r.CanceledDueToError}}),void e.destroy();default:return void e.hideByClose({closeReason:r.Canceled})}}),u},e.prototype.hideByClose=function(e){if(this.feedbackWindow&&this.currentQuestion.state!==y.None){this.feedbackWindow.iframe.style.display="none";var t=this.currentQuestion.showOptions;this.currentQuestion={state:y.None},this.emitMessage({type:o.Closed,showOptions:t,closeEventPayload:e})}},e.prototype.emitMessage=function(e){this.messagesEmitter.emit(e.type,e)},e.prototype.preload=function(){this.feedbackWindow||(this.feedbackWindow=this.init())},e.prototype.closeFeedbackWindow=function(){this.hideByClose({closeReason:r.ClosedByOpener})},e.prototype.destroy=function(){if(this.currentQuestion={state:y.None},this.feedbackWindow){var e=this.feedbackWindow,t=e.iframe,n=e.transport,r=t.parentNode;r&&r.removeChild(t);try{n.destroy()}finally{this.feedbackWindow=void 0}}},e.prototype.addListener=function(e,t){return this.messagesEmitter.addListener(e,t)},e.prototype.showQuestion=function(e){var t=this,n=void this.options;if(n)this.emitMessage(n);else if(this.currentQuestion.state===y.None){var r=(new Date).getTime();this.sessionId=Object(i.getRandomGuid4)(),this.currentQuestion={state:y.Opening,showOptions:e};var u=this.feedbackWindow||(this.feedbackWindow=this.init()),a=function(e){return e.then(function(e){return{isError:!1,result:e}},function(e){return{isError:!0,error:e}})}(function(e,t,n){return s.__awaiter(this,void 0,Promise,function(){var r,o,i,u,a;return s.__generator(this,function(c){switch(c.label){case 0:return n.disableExposure?[2,{shouldExpose:!0}]:[4,e.getShouldAskQuestion(n.questionId)];case 1:return r=c.sent(),o=r.shouldExpose,i=r.categoryId,u=r.unExposedReason,a=t(i),w(s.__assign({},a,{isAllowed:o},o?{}:{blockReason:u})),[2,r]}})})}(this.exposureService,this.getBiDefaultParams(e),e));Promise.all([this.loadExperimentsBag(),this.feedbackWindow.loadPromise]).then(function(n){var o=n[0];return function(e,t){return function(e,t){return"true"===e[t]}(t,"specs.user-feedback.DisableExposure")?Promise.resolve({shouldExpose:!0}):e}(function(e){return e.then(function(e){return e.isError?Promise.reject(e.error):Promise.resolve(e.result)})}(a),o).then(function(n){var i=n.shouldExpose,a=n.categoryId;i?(!function(e){f.log(s.__assign({},e,{evid:801}))}(s.__assign({},t.getBiDefaultParams(e)(a))),t.sendOpenQuestionMessage({feedbackWindow:u,categoryId:a,experimentsBag:o,showOptions:e,startOpeningTime:r})):t.currentQuestion={state:y.None}})}).catch(this.emitErrorAndResetState(e))}else this.emitMessage({type:o.Error,showOptions:e,error:new Error("Cannot show question while another question is being opened. Try to close active question before showing new one.")})},e}(),E=n(11);n.d(t,"OpenerEvent",function(){return E.OpenerEvent}),n.d(t,"OpenerEventTypes",function(){return o}),n.d(t,"OpenerEventClosed",function(){return E.OpenerEventClosed}),n.d(t,"CloseReasonType",function(){return r}),n.d(t,"Layouts",function(){return i.Layouts}),n.d(t,"RegionsRecognitionLayout",function(){return i.RegionsRecognitionLayout}),n.d(t,"RegionsSelectionLayout",function(){return i.RegionsSelectionLayout}),n.d(t,"FreeTextLayout",function(){return i.FreeTextLayout}),n.d(t,"MultichoiceTextLayout",function(){return i.MultichoiceTextLayout}),n.d(t,"TwoImagesToggleLayout",function(){return i.TwoImagesToggleLayout}),n.d(t,"TwoOptionsLayout",function(){return i.TwoOptionsLayout}),n.d(t,"TwoOptionsTextLayout",function(){return i.TwoOptionsTextLayout});t.default=x}])});
//# sourceMappingURL=UserFeedbackOpener.bundle.min.js.map